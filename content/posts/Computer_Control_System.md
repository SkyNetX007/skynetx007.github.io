---
layout: post
tags: ["Notes"]
title: "计算机控制系统"
date: 2021-09-16T12:48:25+08:00
math: true
draft: false
---

# 数字PID控制器设计

## 标准数字PID控制算法

### 标准PID数字控制算式
- 位置型PID
- 增量型PID
- 递推式PID

$K_i=\frac{K_p T}{T_i}$为积分系数，$K_d=\frac{K_p T_d}{T}$为微分系数

增量型PID相对于位置型的优点：
1. 增量的确定仅售最近几次偏差采样影响，累加误差小
2. 使用控制量的增量，误动作影响小
3. 手动/自动无扰动切换
4. 不会产生积分饱和现象

增量型PID原理上需要一个积分器：增量型执行元件需要位置保持功能

对增量型算法进行限幅可保证执行器动作幅度小，有利于克服系统故障出现的问题（如阀门调节）

### 数字PID基本编程

## 改进的PID算法

### 带有死区的PID算法
偏差较小保持上次控制值，偏差较大重新计算控制值。

### 抑制积分饱和PID算法
1. 限幅削弱积分：设置饱和区，达到饱和区后控制值不变化
2. 积分分离PID算式：大偏差时取消积分作用，采用PD或纯比例控制，小偏差恢复PID
3. 变速积分PID算式：设置过渡带，偏差大无积分，偏差小全积分，由大到小积分作用逐渐增强（有利于抵抗积分饱和，且算法切换系统响应不变动；但算法复杂，且多出参数A、B）

### 不完全微分的PID控制
（P60）

微分太强的危害：输出毛刺多，动态过程长久振荡无法进入稳态

不完全微分传递函数：
$$\frac{U(s)}{E(s)}=K_p [1+\frac 1 {T_i s}+\frac{T_d s}{1+\frac{T_d}{K_d} s}]$$
比例积分+不完全微分($\frac{T_d s}{1+\frac{T_d}{K_d} s}$)
微分项控制输出为
$$U_D(k)=\alpha u_D(k-1)+\frac{K_p T_d}{T}(1-\alpha)[e(k)-e(k-1)])$$
其中，$T_f=\frac{T_d}{K_d}$，$\alpha=\frac{T_f}{T_f+T}$

不完整PID数字低通滤波（一阶惯性环节），抗高频干扰，信号突变时比较平滑。

### 微分先行PID控制
只对反馈实行不完全积分，对设定量不进行微分。
- 优点：可避免大幅度改变设定值时造成振荡现象以及抑制噪声
- 缺点：算法复杂

### 其他控制方法
数字滤波：低通滤波、均值滤波、中值滤波

## 数字PID控制器的工程实现

### 工程上数字PID控制器程序组成
六个模块：
1. 设定值处理
    - 选择不同来源的设定值（一般存在内存中）
    - 对设定值的变化率进行限制（实现平稳控制）
2. 被控量处理
    - 数字滤波
    - 线性补偿和公式转换
    - 越限报警处理（报警死区：报警死区的作用是为了防止变量值在报警限上下频繁波动时，产生许多不真实的报警 ( http://scada1.t50rtu.com/html_file/sc01b/241.html )
3. 偏差处理
    - 计算偏差(P64(4))
        - 正作用：被控量-设定值
        - 反作用：设定值-被控量
    - 偏差报警
    - 算法实现非线性
4. PID计算
5. 控制量处理
    - 输出补偿
    - 变化率限制
    - 输出保持
    - 安全输出
6. 自动/手动切换
    - 硬手动（直接手动操作）/软手动（给出手动信号由计算机采集）
    - 无扰切换（增量式/递推式）
    - 控制值限幅

需要注意的问题：
- 定点运算/浮点运算
- 控制输出限幅
- 积累整量化误差（定点运算和小的采样周期易出现）
    - 适当加大采样周期
    - 积累数据专门处理，若干采样周期统一量化计算
- 正反处理

## PID参数整定方法

### 采样周期T的选择
1. 信号特性：T必须满足香农定理，尽可能小，但不能太小。考虑计算机响应频率，防止引入计算误差，通常取信号最高频率的5至10倍。
2. 被控对象和执行机构特性：快T小，慢T大；纯滞后系统最后是T的整数倍。$\frac\tau T=N,N\in整数$
3. 对多回路系统，按采样周期短的设定。
4. 数字控制算法要求T不能太小。

### 扩充临界比例度法+试凑法

### 衰减曲线法

# 数字控制器的连续系统方法设计

## 连续系统方法设计数字控制器的原理
- 两种设计模式
1. 将系统等效于连续系统，设计连续控制器，然后离散化得到数字控制器
2. 将系统等效于离散系统，根轨迹法、解析法直接设计数字控制器

- 设计步骤
1. 首先根据性能指标用连续时间系统的根轨迹/频率特性等方法设计D(s)
2. 插入采样开关和保持器，选择合适的采样频率T（开环截止频率的10倍左右），若连续系统特性未发生较大变换则继续，否则重新选取或设计
3. 选择适当的方法将D(s)离散化为D(z)
4. 将G(s)加保持器离散化为G(z)，用求得的D(z)和G(z)构成数字闭环系统，分析系统是否满足条件，不满足重新设计

## 数值积分法
将D(s)转换成微分方程，再用近似积分法等效于差分方程，进而求得控制器D(z)
$$u(kT)=u[(k-1)T]+\int_{(k-1)T}^{kT}(-au+ae)dt$$
积分部分为(-au+ae)在区间[(k-1)T,kT]的面积

### 前向矩形法
将积分近似为相应的矩形，长为-au[(k-1)T]+ae[(k-1)T]，宽为T

回代得
$$u(kT)-(1-aT)u[(k-1)T]=aTe[(k-1)T]$$
两边取Z变换
$$D(z)=\frac{U(z)}{E(z)}=\frac{aTz^{-1}}{1-(1aT)z^{-1}}=\frac{a}{\frac{z-1}{T}+a}$$

则$s\cong\frac{z-1}{T}, z\cong1+Ts$
$$D(z)=D(s)|_{s=\frac{z-1}{T}}$$
$$z=e^{sT}=1+sT+(sT)^2+\cdots\approx1+Ts$$
本质为忽略泰勒展开2次项及更高项

### 后向矩形法
将积分近似为相应的矩形，长为-au(kT)+ae(kT)，宽为T，其余类似前向矩形法

### 梯形法
将积分近似为相应的梯形，上底为-au(kT)+ae(kT)，下底为-au[(k-1)T]+ae[(k-1)T]，高度为T
$$D(z)=\frac{a}{\frac{2}{T}\frac{z-1}{z+1}+a}$$
$$s\cong\frac{2}{T}\frac{1-z^{-1}}{1+z^{-1}}, z\cong\frac{1+\frac{Ts}{2}}{1-\frac{Ts}{2}}$$
即双线性变换

泰勒级数展开推导：$z=e^{sT}=\frac{e^{\frac{sT}{2}}}{e^{\frac{-sT}{2}}}\approx\frac{1+\frac{sT}{2}}{1-\frac{sT}{2}}$

### 稳定性分析
- s稳定域：左半平面
- z稳定域：单位圆内
1. 前向矩形规则
$$z=1+sT=1+jT\omega$$
2. 后向矩形规则
$$z=\frac{1}{2}$$
3. 双线性变换
$$z=1$$

----
# 复习
